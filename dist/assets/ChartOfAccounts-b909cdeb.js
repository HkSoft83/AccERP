import{c as te,u as Q,r as n,j as e,B as h}from"./index-712dd123.js";import{I as $}from"./input-0e3bd006.js";import{D as W,a as X,b as Z,c as se,d as re,e as ce,f as ne,g as le,h as J,i as de,j as oe,A as ie,k as me,l as ue,m as xe,n as pe,o as he,p as be,q as ge}from"./alert-dialog-7872d5c2.js";import{L}from"./label-b1f93db9.js";import{D as je}from"./date-picker-c96add2e.js";import{S as q,a as H,b as V,c as K,d as R}from"./select-4030790a.js";import{S as G}from"./save-f7d3c425.js";import{C as fe,a as Ne,b as ye,c as ke}from"./card-f81b6c80.js";import{F as ve}from"./file-down-fd048a3f.js";import{P as Se}from"./plus-circle-b5794bb7.js";import{S as Ae}from"./search-66d65b07.js";import{P as we,A as De}from"./pen-square-12844aac.js";import{T as Ce}from"./trash-2-2438c5fa.js";import"./check-c977fa3e.js";const Y=te("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),ee={Asset:["Current Assets","Fixed Assets","Tangible Assets","Intangible Assets","Long-term Assets","Investments"],Liability:["Current Liabilities","Long-term Liabilities","Provisions","Accrued Liabilities"],Equity:["Owner's Capital","Owner's Drawings","Retained Earnings","Share Capital","Reserves & Surplus"],Income:["Operating Income","Non-operating Income","Other Income"],Expense:["Direct Expenses","Indirect Expenses","Operating Expenses","Financial Expenses","Depreciation & Amortization","Cost of Goods Sold"]},Be=Object.keys(ee),E="__none__",Oe=({existingAccounts:d=[],onSave:b,onCancel:g,initialData:c,isEditMode:r})=>{var I;const{toast:l}=Q(),[y,v]=n.useState(""),[C,j]=n.useState(""),[i,B]=n.useState(""),[k,p]=n.useState(""),[S,O]=n.useState(E),[m,A]=n.useState(""),[w,T]=n.useState(void 0),[D,F]=n.useState(null);n.useEffect(()=>{var t;r&&c?(v(c.accName||""),j(c.accNum||""),B(c.accType||""),p(c.accSubtype||""),O(c.subAccountOf||E),A(((t=c.openingBalance)==null?void 0:t.toString())||""),T(c.openingBalanceDate?new Date(c.openingBalanceDate):void 0),F(c.id||c.accNum)):s()},[c,r]);const s=()=>{v(""),j(""),B(""),p(""),O(E),A(""),T(void 0),F(null)},o=(t,P=!0)=>{if(t.preventDefault(),!y||!i){l({title:"Validation Error",description:"Account Name and Account Type are required.",variant:"destructive"});return}const a={id:D||`acc-${Date.now()}`,accName:y,accNum:C||D&&D.split("-")[1]||String(Date.now()).slice(-4),accType:i,accSubtype:k,subAccountOf:S===E?null:S,openingBalance:parseFloat(m)||0,openingBalanceDate:w?w.toISOString().split("T")[0]:null};b(a,r),l({title:`Account ${r?"Updated":"Saved"}!`,description:`${y} has been successfully ${r?"updated":"added"}.`}),P?g():r||s()};return e.jsxs("form",{onSubmit:t=>o(t,!0),className:"space-y-4 py-2",children:[e.jsxs(W,{className:"hidden",children:[e.jsx(X,{children:r?"Edit Account":"Add New Account"}),e.jsx(Z,{children:r?"Update the details of the existing account.":"Fill in the details to create a new account."})]}),e.jsxs("div",{children:[e.jsxs(L,{htmlFor:"accountName",children:["Account Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx($,{id:"accountName",value:y,onChange:t=>v(t.target.value),placeholder:"e.g., Main Bank Account",className:"mt-1",required:!0})]}),e.jsxs("div",{children:[e.jsx(L,{htmlFor:"accountNumber",children:"Account Number"}),e.jsx($,{id:"accountNumber",value:C,onChange:t=>j(t.target.value),placeholder:"e.g., 1010",className:"mt-1",disabled:r}),r&&e.jsx("p",{className:"text-xs text-muted-foreground",children:"Account number cannot be changed after creation."})]}),e.jsxs("div",{children:[e.jsxs(L,{htmlFor:"accountType",children:["Account Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(q,{onValueChange:t=>{B(t),p("")},value:i,required:!0,children:[e.jsx(H,{id:"accountType",className:"w-full mt-1",children:e.jsx(V,{placeholder:"Select account type"})}),e.jsx(K,{children:Be.map(t=>e.jsx(R,{value:t,children:t},t))})]})]}),i&&e.jsxs("div",{children:[e.jsxs(L,{htmlFor:"accountSubtype",children:["Account Sub-Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(q,{onValueChange:p,value:k,required:!0,children:[e.jsx(H,{id:"accountSubtype",className:"w-full mt-1",children:e.jsx(V,{placeholder:"Select account sub-type"})}),e.jsx(K,{children:(I=ee[i])==null?void 0:I.map(t=>e.jsx(R,{value:t,children:t},t))})]})]}),e.jsxs("div",{children:[e.jsx(L,{htmlFor:"subAccountOf",children:"Sub-Account of"}),e.jsxs(q,{onValueChange:O,value:S,children:[e.jsx(H,{id:"subAccountOf",className:"w-full mt-1",children:e.jsx(V,{placeholder:"Select parent account (optional)"})}),e.jsxs(K,{children:[e.jsx(R,{value:E,children:"None"}),d.filter(t=>t.accNum!==D).map(t=>e.jsxs(R,{value:t.accNum,children:[t.accName," (",t.accNum,")"]},t.accNum))]})]})]}),e.jsxs("div",{children:[e.jsx(L,{htmlFor:"openingBalance",children:"Opening Balance"}),e.jsx($,{id:"openingBalance",type:"number",value:m,onChange:t=>A(t.target.value),placeholder:"0.00",className:"mt-1",disabled:r}),r&&e.jsx("p",{className:"text-xs text-muted-foreground",children:"Opening balance cannot be changed after creation."})]}),e.jsxs("div",{children:[e.jsx(L,{htmlFor:"openingBalanceDate",children:"Opening Balance As of Date"}),e.jsx("div",{children:e.jsx(je,{date:w,setDate:T,className:"mt-1 w-full",disabled:r})}),r&&e.jsx("p",{className:"text-xs text-muted-foreground",children:"Opening balance date cannot be changed after creation."})]}),e.jsxs(se,{className:"pt-6",children:[e.jsx(re,{asChild:!0,children:e.jsx(h,{variant:"outline",onClick:g,children:"Cancel"})}),!r&&e.jsxs(h,{type:"button",onClick:t=>o(t,!1),variant:"secondary",children:[e.jsx(G,{size:18,className:"mr-2"})," Save & New"]}),e.jsxs(h,{type:"submit",children:[e.jsx(G,{size:18,className:"mr-2"})," ",r?"Update Account":"Save & Close"]})]})]})},Te=[{date:"2023-01-01",description:"Opening Balance",debit:5e3,credit:0,balance:5e3},{date:"2023-01-05",description:"Sales Revenue",debit:0,credit:2e3,balance:7e3},{date:"2023-01-10",description:"Office Supplies",debit:500,credit:0,balance:6500},{date:"2023-01-15",description:"Customer Payment",debit:0,credit:1e3,balance:7500},{date:"2023-01-20",description:"Utility Bill",debit:200,credit:0,balance:7300}],Fe=({account:d,onBack:b})=>{const[g,c]=n.useState(!1),[r,l]=n.useState(""),[y,v]=n.useState(""),[C,j]=n.useState(!1),[i,B]=n.useState([]),[k,p]=n.useState(""),[S,O]=n.useState(""),m=d?Te.filter(s=>(s.description.includes(d.accName)||s.description.includes("Balance"))&&(!k||new Date(s.date)>=new Date(k))&&(!S||new Date(s.date)<=new Date(S))):[],A=m.length>0?m[0].balance:0,w=m.filter((s,o)=>o!==0&&i.includes(o)).reduce((s,o)=>s+o.debit,0),T=m.filter((s,o)=>o!==0&&i.includes(o)).reduce((s,o)=>s+o.credit,0),D=A-w+T,F=Number(r)-D;return d?C?e.jsxs("div",{className:"space-y-4 p-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs(h,{variant:"outline",onClick:()=>j(!1),children:[e.jsx(Y,{className:"mr-2 h-4 w-4"})," Back"]}),e.jsxs("h2",{className:"text-xl font-bold",children:["Reconcile ",d.accName]})]}),e.jsxs("div",{className:"grid grid-cols-8 gap-[2px] mb-2 items-center",children:[e.jsxs("div",{className:"col-span-2 bg-muted/30 dark:bg-dark-muted/30 p-2 rounded h-[90px] min-h-[90px] flex flex-col justify-center border border-blue-500 shadow-md shadow-blue-300/50",children:[e.jsx("h3",{className:"text-base font-semibold mb-1",children:"Ending Balance"}),e.jsx("p",{className:"font-bold text-base",children:Number(r).toLocaleString("en-US",{minimumFractionDigits:2})})]}),e.jsx("div",{className:"col-span-1 flex items-center justify-center text-2xl font-bold h-[90px] min-h-[90px]",children:"-"}),e.jsxs("div",{className:"col-span-2 bg-muted/30 dark:bg-dark-muted/30 p-2 rounded h-[90px] min-h-[90px] flex flex-col justify-center border border-blue-500 shadow-md shadow-blue-300/50",children:[e.jsx("h3",{className:"text-base font-semibold mb-1",children:"Cleared Balance"}),e.jsx("p",{className:"font-bold text-base",children:D.toLocaleString("en-US",{minimumFractionDigits:2})}),e.jsxs("p",{className:"text-xs italic",children:["Begin. Balance (",A,") - Payments (",w,") + Deposits (",T,")"]})]}),e.jsx("div",{className:"col-span-1 flex items-center justify-center text-2xl font-bold h-[90px] min-h-[90px]",children:"="}),e.jsxs("div",{className:"col-span-2 bg-muted/30 dark:bg-dark-muted/30 p-2 rounded h-[90px] min-h-[90px] flex flex-col justify-center border border-blue-500 shadow-md shadow-blue-300/50",title:"There is a difference. Please select transactions to reconcile.",children:[e.jsx("h3",{className:"text-base font-semibold mb-1",children:"Difference"}),e.jsx("p",{className:"font-bold text-base",children:F.toLocaleString("en-US",{minimumFractionDigits:2})}),F===0?e.jsx("p",{className:"text-green-600 font-semibold mt-1 text-xs",children:"Account reconciled!"}):e.jsx("p",{className:"text-red-600 font-semibold mt-1 text-xs"})]})]}),e.jsxs("div",{className:"bg-card dark:bg-dark-card p-2 rounded shadow-sm",children:[e.jsx("h3",{className:"text-base font-semibold mb-2",children:"Unreconciled Transactions"}),e.jsxs("table",{className:"w-full min-w-[600px] text-xs text-left text-foreground dark:text-dark-foreground border",children:[e.jsx("thead",{className:"bg-muted/50 dark:bg-dark-muted/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 py-1",children:"Select"}),e.jsx("th",{className:"px-2 py-1",children:"Date"}),e.jsx("th",{className:"px-2 py-1",children:"Description"}),e.jsx("th",{className:"px-2 py-1 text-right",children:"Debit"}),e.jsx("th",{className:"px-2 py-1 text-right",children:"Credit"}),e.jsx("th",{className:"px-2 py-1 text-right",children:"Balance"})]})}),e.jsx("tbody",{children:m.map((s,o)=>o===0?null:e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"px-2 py-1 text-center",children:e.jsx("input",{type:"checkbox",checked:i.includes(o),onChange:I=>{I.target.checked?B([...i,o]):B(i.filter(t=>t!==o))}})}),e.jsx("td",{className:"px-2 py-1",children:s.date}),e.jsx("td",{className:"px-2 py-1",children:s.description}),e.jsx("td",{className:"px-2 py-1 text-right",children:s.debit.toLocaleString("en-US",{minimumFractionDigits:2})}),e.jsx("td",{className:"px-2 py-1 text-right",children:s.credit.toLocaleString("en-US",{minimumFractionDigits:2})}),e.jsx("td",{className:"px-2 py-1 text-right",children:s.balance.toLocaleString("en-US",{minimumFractionDigits:2})})]},o))})]}),e.jsx(h,{variant:"primary",className:"mt-2",disabled:F!==0,onClick:()=>j(!1),children:"Finish Reconciliation"})]})]}):e.jsxs("div",{className:"space-y-6 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs(h,{variant:"outline",onClick:b,className:"bg-white text-blue-700 border border-blue-500 hover:bg-blue-50",children:[e.jsx(Y,{className:"mr-2 h-4 w-4"})," Chart of Accounts"]}),e.jsxs("h2",{className:"text-2xl font-bold",children:["Ledger: ",d.accName," (",d.accNum,")"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 bg-muted/50 dark:bg-dark-muted/50 p-2 rounded-md mb-2 items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Account Type:"}),e.jsx("p",{className:"font-medium",children:d.accType})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Account Sub-Type:"}),e.jsx("p",{className:"font-medium",children:d.accSubtype})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Current Balance:"}),e.jsx("p",{className:"font-bold text-lg",children:d.balanceFormatted})]}),e.jsx(h,{variant:"primary",className:"bg-gradient-to-r from-blue-500 to-blue-700 text-white font-semibold px-5 py-1 rounded shadow hover:from-blue-600 hover:to-blue-800 transition ml-4",onClick:()=>c(!0),children:"Reconcile"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-2 items-center bg-muted/30 dark:bg-dark-muted/30 p-2 rounded shadow-sm",children:[e.jsxs("div",{className:"flex flex-col min-w-[120px]",children:[e.jsx("label",{className:"block text-xs text-muted-foreground mb-1",children:"Start Date"}),e.jsx("input",{type:"date",value:k,onChange:s=>p(s.target.value),className:"px-2 py-1 border rounded text-xs"})]}),e.jsxs("div",{className:"flex flex-col min-w-[120px]",children:[e.jsx("label",{className:"block text-xs text-muted-foreground mb-1",children:"End Date"}),e.jsx("input",{type:"date",value:S,onChange:s=>O(s.target.value),className:"px-2 py-1 border rounded text-xs"})]})]}),g?e.jsxs("div",{className:"mb-4 p-2 border rounded-md bg-muted/30 dark:bg-dark-muted/30 shadow",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Reconcile Account"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-muted-foreground mb-1",children:"Account Name"}),e.jsx("input",{type:"text",value:d.accName,disabled:!0,className:"w-full px-3 py-2 border rounded bg-muted/50 dark:bg-dark-muted/50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-muted-foreground mb-1",children:"Beginning Balance"}),e.jsx("input",{type:"text",value:A.toLocaleString("en-US",{style:"decimal",minimumFractionDigits:2}),disabled:!0,className:"w-full px-3 py-2 border rounded bg-muted/50 dark:bg-dark-muted/50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-muted-foreground mb-1",children:"Statement Ending Balance"}),e.jsx("input",{type:"number",value:r,onChange:s=>l(s.target.value),placeholder:"Enter ending balance",className:"w-full px-3 py-2 border rounded"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-muted-foreground mb-1",children:"Statement Ending Date"}),e.jsx("input",{type:"date",value:y,onChange:s=>v(s.target.value),className:"w-full px-3 py-2 border rounded"})]})]}),e.jsx(h,{variant:"primary",className:"bg-gradient-to-r from-green-500 to-green-700 text-white font-semibold px-6 py-2 rounded shadow hover:from-green-600 hover:to-green-800 transition",onClick:()=>{c(!1),j(!0)},children:"Start Reconciliation"}),e.jsx(h,{variant:"outline",className:"ml-2",onClick:()=>{c(!1),l(""),v("")},children:"Cancel"})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"mt-2 overflow-x-auto rounded-lg border border-border dark:border-dark-border shadow-md",style:{minHeight:"70vh",maxHeight:"80vh",overflowY:"auto"},children:[e.jsx("h3",{className:"text-xl font-semibold p-2 bg-card dark:bg-dark-card border-b border-border dark:border-dark-border",children:"Transactions"}),e.jsxs("table",{className:"w-full min-w-[700px] text-sm text-left text-foreground dark:text-dark-foreground",children:[e.jsx("thead",{className:"text-xs text-primary dark:text-dark-primary uppercase bg-muted/50 dark:bg-dark-muted/50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-2 py-1",children:"Date"}),e.jsx("th",{scope:"col",className:"px-2 py-1",children:"Description"}),e.jsx("th",{scope:"col",className:"px-2 py-1",children:"Transaction Type"}),e.jsx("th",{scope:"col",className:"px-2 py-1 text-right",children:"Debit"}),e.jsx("th",{scope:"col",className:"px-2 py-1 text-right",children:"Credit"}),e.jsx("th",{scope:"col",className:"px-2 py-1 text-right",children:"Balance"})]})}),e.jsx("tbody",{children:m.length>0?m.map((s,o)=>e.jsxs("tr",{className:"bg-card dark:bg-dark-card border-b border-border dark:border-dark-border last:border-b-0 hover:bg-muted/30 dark:hover:bg-dark-muted/30 transition-colors duration-150",children:[e.jsx("td",{className:"px-2 py-1",children:s.date}),e.jsx("td",{className:"px-2 py-1",children:s.description}),e.jsx("td",{className:"px-2 py-1",children:s.debit>0&&s.credit===0?"Payment":s.credit>0&&s.debit===0?"Deposit":"Other"}),e.jsx("td",{className:"px-2 py-1 text-right",children:s.debit.toLocaleString("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2})}),e.jsx("td",{className:"px-2 py-1 text-right",children:s.credit.toLocaleString("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2})}),e.jsx("td",{className:"px-2 py-1 text-right font-semibold",children:s.balance.toLocaleString("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2})})]},o)):e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"text-center py-4 text-muted-foreground",children:"No transactions found for this account."})})})]})]})})]}):e.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Select an account to view its ledger."})},M=[{sl:1,id:"acc-1001",accNum:"1001",accName:"Cash on Hand",accType:"Asset",accSubtype:"Current Assets",balance:5e3,openingBalance:5e3,openingBalanceDate:"2023-01-01",subAccountOf:null},{sl:2,id:"acc-1002",accNum:"1002",accName:"Accounts Receivable",accType:"Asset",accSubtype:"Current Assets",balance:12500,openingBalance:12500,openingBalanceDate:"2023-01-01",subAccountOf:null},{sl:3,id:"acc-2001",accNum:"2001",accName:"Accounts Payable",accType:"Liability",accSubtype:"Current Liabilities",balance:7200,openingBalance:7200,openingBalanceDate:"2023-01-01",subAccountOf:null},{sl:4,id:"acc-4001",accName:"Sales Revenue",accType:"Income",accSubtype:"Operating Income",balance:25e3,openingBalance:25e3,openingBalanceDate:"2023-01-01",subAccountOf:null},{sl:5,id:"acc-1003",accNum:"1003",accName:"Petty Cash",accType:"Asset",accSubtype:"Current Assets",balance:500,openingBalance:500,openingBalanceDate:"2023-01-01",subAccountOf:"1001"},{sl:6,id:"acc-5001",accNum:"5001",accName:"Office Expenses",accType:"Expense",accSubtype:"Operating Expenses",balance:1200,openingBalance:1200,openingBalanceDate:"2023-01-01",subAccountOf:null}],z=d=>({...d,balanceFormatted:(d.balance||0).toLocaleString("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),accSubtype:d.accSubtype||"N/A"}),U=({children:d,columnKey:b,sortConfig:g,requestSort:c,isTextRight:r=!1,className:l=""})=>{const y=g&&g.key===b,v=y?g.direction:null;return e.jsx("th",{scope:"col",className:`px-4 py-3 cursor-pointer hover:bg-primary/10 dark:hover:bg-dark-primary/10 transition-colors ${r?"text-right":"text-left"} ${l}`,onClick:()=>c(b),children:e.jsxs("div",{className:`flex items-center ${r?"justify-end":"justify-start"}`,children:[!r&&d,e.jsx("span",{className:`mx-1 ${r?"mr-0 ml-1":"ml-0 mr-1"}`,children:y?v==="ascending"?"▲":"▼":e.jsx(De,{size:14,className:"opacity-40"})}),r&&d]})})},Ge=()=>{const{toast:d}=Q(),[b,g]=n.useState(()=>M.map(z)),[c,r]=n.useState(""),[l,y]=n.useState({key:"sl",direction:"ascending"}),[v,C]=n.useState(!1),[j,i]=n.useState(null),[B,k]=n.useState(!1),[p,S]=n.useState(null),[O,m]=n.useState(null);n.useEffect(()=>{const a=localStorage.getItem("chartOfAccounts");a?g(JSON.parse(a).map(z)):localStorage.setItem("chartOfAccounts",JSON.stringify(M))},[]);const A=a=>{localStorage.setItem("chartOfAccounts",JSON.stringify(a.map(({balanceFormatted:u,...f})=>f)))},w=(a=null)=>{i(a),C(!0)},T=()=>{C(!1),i(null)},D=(a,u)=>{g(f=>{let x;if(u)x=f.map(N=>N.id===a.id?z({...N,...a,balance:a.openingBalance}):N);else{const N=f.length>0?Math.max(...f.map(ae=>ae.sl))+1:1,_=z({...a,sl:N,balance:a.openingBalance});x=[...f,_]}return A(x),x})},F=a=>{const u=b.find(f=>f.id===a);u&&(S(u),k(!0))},s=()=>{if(p){const a=b.filter(u=>u.id!==p.id);g(a),A(a),d({title:"Account Deleted",description:`${p.accName} has been deleted.`,variant:"destructive"}),k(!1),S(null)}},o=()=>{d({title:"Import from Excel",description:"This feature will be available soon.",duration:3e3})},I=a=>r(a.target.value),t=a=>{let u="ascending";l&&l.key===a&&l.direction==="ascending"&&(u="descending"),y({key:a,direction:u})},P=n.useMemo(()=>{let a=[...b];if(c){const u=c.toLowerCase();a=a.filter(f=>Object.values(f).some(x=>String(x).toLowerCase().includes(u)))}return l!==null&&a.sort((u,f)=>{let x=u[l.key],N=f[l.key];return["balance","sl","openingBalance"].includes(l.key)?(x=parseFloat(x)||0,N=parseFloat(N)||0):typeof x=="string"&&(x=x.toLowerCase(),N=N.toLowerCase()),x<N?l.direction==="ascending"?-1:1:x>N?l.direction==="ascending"?1:-1:0}),a},[c,l,b]);return e.jsx("div",{className:"space-y-6 p-1",children:O?e.jsx(Fe,{account:O,onBack:()=>m(null)}):e.jsxs(fe,{className:"shadow-lg border-border dark:border-dark-border",children:[e.jsx(Ne,{className:"bg-card dark:bg-dark-card rounded-t-lg p-4 md:p-6 border-b border-border dark:border-dark-border",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-3",children:[e.jsxs(ye,{className:"text-2xl md:text-3xl font-bold text-primary dark:text-dark-primary flex items-center",children:[e.jsx(ve,{size:28,className:"mr-3 text-accent dark:text-dark-accent"})," Chart of Accounts"]}),e.jsx("div",{className:"flex space-x-2",children:e.jsxs(ce,{children:[e.jsx(ne,{asChild:!0,children:e.jsxs(h,{variant:"outline",className:"text-primary dark:text-dark-primary border-primary dark:border-dark-primary hover:bg-primary/10 dark:hover:bg-dark-primary/10 shadow-sm",children:[e.jsx(Se,{size:20,className:"mr-2"})," Add Account"]})}),e.jsxs(le,{align:"end",className:"bg-card dark:bg-dark-card shadow-lg rounded-md border border-border dark:border-dark-border",children:[e.jsx(J,{onClick:()=>w(null),className:"text-foreground dark:text-dark-foreground hover:bg-primary/10 dark:hover:bg-dark-primary/10 cursor-pointer",children:"Add New"}),e.jsx(J,{onClick:o,className:"text-foreground dark:text-dark-foreground hover:bg-primary/10 dark:hover:bg-dark-primary/10 cursor-pointer",children:"Import from Excel"})]})]})})]})}),e.jsxs(ke,{className:"p-4 md:p-6",children:[e.jsx(de,{open:v,onOpenChange:C,children:e.jsxs(oe,{className:"sm:max-w-[550px] bg-card dark:bg-dark-card text-foreground dark:text-dark-foreground border-border dark:border-dark-border shadow-2xl rounded-lg",children:[e.jsxs(W,{children:[e.jsx(X,{className:"text-primary dark:text-dark-primary text-2xl font-semibold",children:j?"Edit Account":"Add New Account"}),e.jsx(Z,{className:"text-muted-foreground dark:text-dark-muted-foreground",children:j?"Update the account details.":"Fill in the details to create a new account."})]}),e.jsx(Oe,{existingAccounts:b,onSave:D,onCancel:T,initialData:j,isEditMode:!!j})]})}),e.jsx(ie,{open:B,onOpenChange:k,children:e.jsxs(me,{children:[e.jsxs(ue,{children:[e.jsx(xe,{children:"Are you absolutely sure?"}),e.jsxs(pe,{children:['This action cannot be undone. This will permanently delete the account "',p==null?void 0:p.accName,'".']})]}),e.jsxs(he,{children:[e.jsx(be,{onClick:()=>k(!1),children:"Cancel"}),e.jsx(ge,{onClick:s,className:"bg-destructive hover:bg-destructive/90",children:"Yes, delete account"})]})]})}),e.jsxs("div",{className:"mb-6 flex items-center space-x-2 p-3 bg-background dark:bg-dark-background rounded-lg shadow-sm border border-border dark:border-dark-border",children:[e.jsx($,{type:"text",placeholder:"Search accounts (Sl No, Name, Type...)",className:"flex-grow focus:ring-accent dark:focus:ring-dark-accent border-input dark:border-dark-input focus:border-primary dark:focus:border-dark-primary",value:c,onChange:I}),e.jsxs(h,{className:"bg-primary text-primary-foreground hover:bg-primary-hover dark:bg-dark-primary dark:text-dark-primary-foreground dark:hover:bg-dark-primary-hover",onClick:()=>d({title:"Search Updated",description:`Displaying results for "${c}"`}),children:[e.jsx(Ae,{size:18,className:"mr-2"})," Search"]})]}),e.jsx("div",{className:"overflow-x-auto rounded-lg border border-border dark:border-dark-border shadow-md",children:e.jsxs("table",{className:"w-full min-w-[800px] text-sm text-left text-foreground dark:text-dark-foreground",children:[e.jsx("thead",{className:"text-xs text-primary dark:text-dark-primary uppercase bg-muted/50 dark:bg-dark-muted/50",children:e.jsxs("tr",{children:[e.jsx(U,{columnKey:"sl",sortConfig:l,requestSort:t,className:"w-16",children:"Sl"}),e.jsx(U,{columnKey:"accNum",sortConfig:l,requestSort:t,children:"Acc. No."}),e.jsx(U,{columnKey:"accName",sortConfig:l,requestSort:t,className:"min-w-[250px]",children:"Account Name"}),e.jsx(U,{columnKey:"accType",sortConfig:l,requestSort:t,children:"Type"}),e.jsx(U,{columnKey:"accSubtype",sortConfig:l,requestSort:t,children:"Sub-Type"}),e.jsx(U,{columnKey:"balance",sortConfig:l,requestSort:t,isTextRight:!0,children:"Balance"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-center w-28",children:"Actions"})]})}),e.jsxs("tbody",{children:[P.map(a=>e.jsxs("tr",{className:"bg-card dark:bg-dark-card border-b border-border dark:border-dark-border last:border-b-0 hover:bg-muted/30 dark:hover:bg-dark-muted/30 transition-colors duration-150",children:[e.jsx("td",{className:"px-4 py-3",children:a.sl}),e.jsx("td",{className:"px-4 py-3 text-xs font-mono",children:a.accNum}),e.jsx("td",{className:"px-4 py-3 font-medium text-secondary dark:text-dark-secondary hover:underline cursor-pointer",onClick:()=>m(a),children:a.accName}),e.jsx("td",{className:"px-4 py-3",children:a.accType}),e.jsx("td",{className:"px-4 py-3",children:a.accSubtype}),e.jsx("td",{className:"px-4 py-3 text-right font-semibold hover:underline cursor-pointer text-primary dark:text-dark-primary",onClick:()=>m(a),children:a.balanceFormatted}),e.jsxs("td",{className:"px-4 py-3 text-center space-x-1",children:[e.jsx(h,{variant:"ghost",size:"icon",className:"text-secondary dark:text-dark-secondary hover:text-accent dark:hover:text-dark-accent h-8 w-8",onClick:()=>w(a),children:e.jsx(we,{size:16})}),e.jsx(h,{variant:"ghost",size:"icon",className:"text-destructive dark:text-red-400 hover:text-destructive/80 dark:hover:text-red-300 h-8 w-8",onClick:()=>F(a.id),children:e.jsx(Ce,{size:16})})]})]},a.id)),P.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"text-center py-10 text-muted-foreground dark:text-dark-muted-foreground",children:c?`No accounts found for "${c}".`:"No accounts found. Get started by adding an account!"})})]})]})})]})]})})};export{Ge as default};
