import{c as ce,u as se,r as o,j as e,B as f,S as ie,a as me}from"./index-712dd123.js";import{I as v}from"./input-0e3bd006.js";import{i as R,r as ue,j as G,D as K,a as Y,b as X,c as W,d as Z,e as he,f as pe,g as xe,h as _,A as ge,k as be,l as fe,m as je,n as Ne,o as ke,p as ve,q as ye}from"./alert-dialog-7872d5c2.js";import{L as D}from"./label-b1f93db9.js";import{D as Q,f as ee}from"./date-picker-c96add2e.js";import{S as Se,a as Ce,b as De,c as we,d as Fe}from"./select-4030790a.js";import{S as re}from"./save-f7d3c425.js";import{C as te,a as ne,b as de,c as oe}from"./card-f81b6c80.js";import{T as Be,a as Ve,b as H,c as z,d as Ae,e as I}from"./table-140c59b2.js";import{p as $,P as Te,F as Oe}from"./parseISO-65138e6e.js";import{S as le}from"./search-66d65b07.js";import{P as Ie}from"./plus-circle-b5794bb7.js";import{P as Le,A as Pe}from"./pen-square-12844aac.js";import{T as ze}from"./trash-2-2438c5fa.js";import"./check-c977fa3e.js";const $e=ce("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]),Me=({onSave:h,onCancel:j,initialData:m,isEditMode:i})=>{const{toast:N}=se(),[c,w]=o.useState(""),[y,F]=o.useState(""),[k,B]=o.useState(""),[V,S]=o.useState(""),[n,A]=o.useState(""),[C,T]=o.useState(""),[L,d]=o.useState(""),[u,p]=o.useState(void 0),[O,x]=o.useState(null);o.useState(!1);const[s,g]=o.useState([{name:"Custom Field 1",value:"",options:""},{name:"Custom Field 2",value:"",options:""},{name:"Custom Field 3",value:"",options:""}]),U=(r,l)=>{const t=[...s];t[r].name=l,g(t)},q=(r,l)=>{const t=[...s];t[r].options=l,g(t)},P=(r,l)=>{const t=[...s];t[r].value=l,g(t)};o.useEffect(()=>{var r;i&&m?(w(m.name||""),F(m.proprietorName||""),B(m.vendorNumber||""),S(m.phoneNumber||""),A(m.address||""),T(m.nid||""),d(((r=m.openingBalance)==null?void 0:r.toString())||""),p(m.openingBalanceDate?new Date(m.openingBalanceDate):void 0),x(m.id||m.vendorNumber),m.customFields&&g(m.customFields)):M()},[m,i]);const M=()=>{w(""),F(""),B(""),S(""),A(""),T(""),d(""),p(void 0),x(null),g([{name:"Custom Field 1",value:"",options:""},{name:"Custom Field 2",value:"",options:""},{name:"Custom Field 3",value:"",options:""}])},a=(r,l=!0)=>{if(r.preventDefault(),!c){N({title:"Validation Error",description:"Vendor Name is required.",variant:"destructive"});return}const t={id:O||`vend-${Date.now()}`,name:c,proprietorName:y,vendorNumber:k||(O?O.split("-")[1]||String(Date.now()).slice(-4):`V${String(Date.now()).slice(-4)}`),phoneNumber:V,address:n,nid:C,openingBalance:parseFloat(L)||0,openingBalanceDate:u?u.toISOString().split("T")[0]:null,customFields:s};h(t,i),N({title:`Vendor ${i?"Updated":"Saved"}!`,description:`${c} has been successfully ${i?"updated":"added"}.`}),l?j():i||M()};return e.jsxs("form",{onSubmit:r=>a(r,!0),className:"space-y-4 py-2",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs(R,{children:[e.jsx(ue,{asChild:!0,children:e.jsx(f,{variant:"ghost",size:"icon",children:e.jsx(ie,{className:"h-5 w-5"})})}),e.jsxs(G,{children:[e.jsxs(K,{children:[e.jsx(Y,{children:"Customize Fields"}),e.jsx(X,{children:"Define the labels and options for your custom fields."})]}),e.jsx("div",{className:"space-y-4 py-4",children:s.map((r,l)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs(D,{children:["Field ",l+1," Name"]}),e.jsx(v,{value:r.name,onChange:t=>U(l,t.target.value)}),e.jsxs(D,{children:["Field ",l+1," Options (comma-separated)"]}),e.jsx(v,{value:r.options,onChange:t=>q(l,t.target.value),placeholder:"e.g., Option 1, Option 2"})]},l))}),e.jsx(W,{children:e.jsx(Z,{asChild:!0,children:e.jsx(f,{children:"Done"})})})]})]})}),e.jsxs("div",{children:[e.jsxs(D,{htmlFor:"vendorName",children:["Vendor Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(v,{id:"vendorName",value:c,onChange:r=>w(r.target.value),placeholder:"e.g., Supplier Alpha Inc.",className:"mt-1",required:!0})]}),e.jsxs("div",{children:[e.jsx(D,{htmlFor:"proprietorName",children:"Proprietor Name"}),e.jsx(v,{id:"proprietorName",value:y,onChange:r=>F(r.target.value),placeholder:"e.g., John Doe",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(D,{htmlFor:"vendorNumber",children:"Vendor Number"}),e.jsx(v,{id:"vendorNumber",value:k,onChange:r=>B(r.target.value),placeholder:"e.g., V001",className:"mt-1",disabled:i}),i&&e.jsx("p",{className:"text-xs text-muted-foreground",children:"Vendor number cannot be changed after creation."})]}),e.jsxs("div",{children:[e.jsx(D,{htmlFor:"phoneNumber",children:"Phone Number"}),e.jsx(v,{id:"phoneNumber",value:V,onChange:r=>S(r.target.value),placeholder:"e.g., +1234567890",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(D,{htmlFor:"address",children:"Address"}),e.jsx(v,{id:"address",value:n,onChange:r=>A(r.target.value),placeholder:"e.g., 123 Supply Chain Rd",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(D,{htmlFor:"nid",children:"NID"}),e.jsx(v,{id:"nid",value:C,onChange:r=>T(r.target.value),placeholder:"e.g., 1234567890123",className:"mt-1"})]}),s.map((r,l)=>e.jsxs("div",{children:[e.jsx(D,{htmlFor:`custom-field-${l}`,children:r.name}),r.options?e.jsxs(Se,{onValueChange:t=>P(l,t),value:r.value,children:[e.jsx(Ce,{className:"mt-1",children:e.jsx(De,{placeholder:`Select ${r.name}`})}),e.jsx(we,{children:r.options.split(",").map((t,b)=>e.jsx(Fe,{value:t.trim(),children:t.trim()},b))})]}):e.jsx(v,{id:`custom-field-${l}`,value:r.value,onChange:t=>P(l,t.target.value),placeholder:`Enter ${r.name}`,className:"mt-1"})]},l)),e.jsxs("div",{children:[e.jsx(D,{htmlFor:"openingBalance",children:"Opening Balance"}),e.jsx(v,{id:"openingBalance",type:"number",value:L,onChange:r=>d(r.target.value),placeholder:"0.00",className:"mt-1",disabled:i}),i&&e.jsx("p",{className:"text-xs text-muted-foreground",children:"Opening balance cannot be changed after creation."})]}),e.jsxs("div",{children:[e.jsx(D,{htmlFor:"openingBalanceDate",children:"Opening Balance As of Date"}),e.jsx(Q,{date:u,setDate:p,className:"mt-1 w-full",disabled:i}),i&&e.jsx("p",{className:"text-xs text-muted-foreground",children:"Opening balance date cannot be changed after creation."})]}),e.jsxs(W,{className:"pt-6",children:[e.jsx(Z,{asChild:!0,children:e.jsx(f,{variant:"outline",onClick:j,children:"Cancel"})}),!i&&e.jsxs(f,{type:"button",onClick:r=>a(r,!1),variant:"secondary",children:[e.jsx(re,{size:18,className:"mr-2"})," Save & New"]}),e.jsxs(f,{type:"submit",children:[e.jsx(re,{size:18,className:"mr-2"})," ",i?"Update Vendor":"Save & Close"]})]})]})},Ee=({vendorId:h,vendorName:j,onClose:m})=>{const[i,N]=o.useState([]),[c,w]=o.useState([]),[y,F]=o.useState(null),[k,B]=o.useState(null),[V,S]=o.useState(""),[n,A]=o.useState(null);o.useEffect(()=>{const u=(JSON.parse(localStorage.getItem("vendors"))||[]).find(p=>p.id===h);A(u)},[h]),o.useEffect(()=>{if(!h)return;const d=JSON.parse(localStorage.getItem("purchaseBills"))||[],u=JSON.parse(localStorage.getItem("payments"))||[],p=JSON.parse(localStorage.getItem("purchaseReturns"))||[],O=JSON.parse(localStorage.getItem("debitNotes"))||[],x=[];d.filter(s=>s.vendorId===h).forEach(s=>{var g;return x.push({date:$(s.billDate),type:"Purchase Bill",ref:s.billNumber,narration:`Bill for ${((g=s.lineItems)==null?void 0:g.length)||0} items`,debit:0,credit:parseFloat(s.grandTotal)||0})}),u.filter(s=>s.paidTo===h).forEach(s=>x.push({date:$(s.date),type:"Payment",ref:s.paymentNumber,narration:s.narration||"Payment made",debit:parseFloat(s.amount)||0,credit:0})),p.filter(s=>s.vendorId===h).forEach(s=>{var g;return x.push({date:$(s.returnDate),type:"Purchase Return",ref:s.returnNumber,narration:`Return of ${((g=s.lineItems)==null?void 0:g.length)||0} items`,debit:parseFloat(s.grandTotal)||0,credit:0})}),O.filter(s=>s.creditAccount===h).forEach(s=>x.push({date:$(s.date),type:"Debit Note",ref:s.debitNoteNumber,narration:s.narration||"Debit issued",debit:parseFloat(s.amount)||0,credit:0})),N(x)},[h]);const C=o.useMemo(()=>{if(!n)return[];let d=n.openingBalance;const u=n.openingBalanceDate?$(n.openingBalanceDate):new Date(new Date().getFullYear(),0,1),p=[];return p.push({date:u,type:"Opening Balance",ref:"-",narration:"Opening Balance",debit:n.openingBalance<0?Math.abs(n.openingBalance):0,credit:n.openingBalance>=0?n.openingBalance:0,balance:d}),[...i].sort((x,s)=>x.date-s.date).forEach(x=>{d+=(x.credit||0)-(x.debit||0),p.push({...x,balance:d})}),p},[i,n]);o.useEffect(()=>{let d=C;if(y&&(d=d.filter(u=>u.date>=y)),k&&(d=d.filter(u=>u.date<=k)),V){const u=V.toLowerCase();d=d.filter(p=>p.type.toLowerCase().includes(u)||p.ref.toLowerCase().includes(u)||p.narration.toLowerCase().includes(u))}w(d)},[C,y,k,V]);const T=()=>window.print(),L=()=>{F(null),B(null),S("")};return e.jsxs(te,{className:"shadow-xl border-border dark:border-dark-border",children:[e.jsx(ne,{className:"bg-muted/50 dark:bg-dark-muted/50 p-4 md:p-6 border-b border-border dark:border-dark-border",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[e.jsx(de,{className:"text-2xl md:text-3xl font-bold text-primary dark:text-dark-primary flex items-center",children:j||(n?n.name:"Loading...")}),e.jsxs(f,{onClick:T,variant:"outline",size:"sm",className:"self-start sm:self-center",children:[e.jsx(Te,{size:16,className:"mr-2"})," Print"]})]})}),e.jsxs(oe,{className:"p-4 md:p-6 space-y-4",children:[n&&e.jsxs("div",{className:"p-3 bg-primary/5 dark:bg-dark-primary/10 rounded-md border border-primary/20 dark:border-dark-primary/20 mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-primary dark:text-dark-primary",children:n.name}),e.jsxs("p",{className:"text-sm text-muted-foreground dark:text-dark-muted-foreground",children:["Vendor ID: ",n.vendorNumber||n.id]}),e.jsxs("p",{className:"text-sm text-muted-foreground dark:text-dark-muted-foreground",children:["Address: ",n.address||"N/A"]}),e.jsxs("p",{className:"text-sm text-muted-foreground dark:text-dark-muted-foreground",children:["Phone: ",n.phoneNumber||"N/A"," | Email: ",n.email||"N/A"]}),e.jsxs("p",{className:"text-sm text-muted-foreground dark:text-dark-muted-foreground",children:["Credit Limit: ",n.creditLimit?parseFloat(n.creditLimit).toLocaleString("en-US",{style:"currency",currency:"USD"}):"N/A"]}),e.jsxs("p",{className:"text-sm text-muted-foreground dark:text-dark-muted-foreground",children:["Bank Account: ",n.bankAccountNo||"N/A"]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[e.jsx(f,{variant:"outline",size:"sm",children:"View Attachments"}),e.jsx(f,{variant:"outline",size:"sm",children:"Purchase Orders"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground dark:text-dark-muted-foreground mt-2",children:["Notes: ",n.notes||"N/A"]}),e.jsxs("p",{className:"text-sm text-muted-foreground dark:text-dark-muted-foreground",children:["Opening Balance: ",parseFloat(n.openingBalance||0).toLocaleString("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2})," as of ",n.openingBalanceDate?ee($(n.openingBalanceDate),"dd-MMM-yyyy"):"N/A"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 items-end",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{htmlFor:"startDate",className:"text-sm font-medium text-muted-foreground dark:text-dark-muted-foreground",children:"From Date"}),e.jsx(Q,{date:y,setDate:F,id:"startDate",placeholder:"Start Date"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{htmlFor:"endDate",className:"text-sm font-medium text-muted-foreground dark:text-dark-muted-foreground",children:"To Date"}),e.jsx(Q,{date:k,setDate:B,id:"endDate",placeholder:"End Date"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 items-center pt-2",children:[e.jsxs("div",{className:"relative flex-grow w-full sm:w-auto",children:[e.jsx(le,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground dark:text-dark-muted-foreground"}),e.jsx(v,{type:"search",placeholder:"Search transactions...",value:V,onChange:d=>S(d.target.value),className:"pl-8 w-full"})]}),e.jsxs(f,{onClick:L,variant:"outline",size:"sm",className:"w-full sm:w-auto",children:[e.jsx(Oe,{size:16,className:"mr-2"})," Clear Filters"]})]}),e.jsx("div",{className:"overflow-x-auto border border-border dark:border-dark-border rounded-lg",children:e.jsxs(Be,{children:[e.jsx(Ve,{className:"bg-muted dark:bg-dark-muted",children:e.jsxs(H,{children:[e.jsx(z,{className:"w-[50px]",children:"Sl No"}),e.jsx(z,{className:"w-[100px]",children:"Date"}),e.jsx(z,{children:"Type / Ref#"}),e.jsx(z,{children:"Narration"}),e.jsx(z,{className:"text-right",children:"Debit"}),e.jsx(z,{className:"text-right",children:"Credit"}),e.jsx(z,{className:"text-right",children:"Balance"})]})}),e.jsx(Ae,{children:c.length>0?c.map((d,u)=>e.jsxs(H,{className:"hover:bg-muted/50 dark:hover:bg-dark-muted/50",children:[e.jsx(I,{children:u+1}),e.jsx(I,{children:ee(d.date,"dd-MMM-yy")}),e.jsxs(I,{children:[e.jsx("div",{className:"font-medium",children:d.type}),e.jsx("div",{className:"text-xs text-muted-foreground dark:text-dark-muted-foreground",children:d.ref})]}),e.jsx(I,{children:d.narration}),e.jsx(I,{className:"text-right",children:(d.debit||0)>0?(d.debit||0).toFixed(2):"-"}),e.jsx(I,{className:"text-right",children:(d.credit||0)>0?(d.credit||0).toFixed(2):"-"}),e.jsx(I,{className:"text-right font-semibold",children:d.balance.toFixed(2)})]},u)):e.jsx(H,{children:e.jsx(I,{colSpan:6,className:"text-center h-24 text-muted-foreground dark:text-dark-muted-foreground",children:"No transactions found for this vendor."})})})]})}),c.length>0&&e.jsxs("div",{className:"flex justify-end pt-2 text-sm font-semibold text-primary dark:text-dark-primary",children:["Final Balance: ",c[c.length-1].balance.toFixed(2),c[c.length-1].balance>=0?" (Payable)":" (Receivable)"]})]})]})},ae=[{id:"vend-001",name:"Supplier Alpha Inc.",proprietorName:"Mr. A",vendorNumber:"V001",address:"123 Supply St",phoneNumber:"555-111-2222",balance:1500,openingBalance:1500,openingBalanceDate:"2023-01-01"},{id:"vend-002",name:"Service Provider Beta",proprietorName:"Ms. B",vendorNumber:"V002",address:"456 Service Ave",phoneNumber:"555-333-4444",balance:0,openingBalance:0,openingBalanceDate:"2023-01-01"},{id:"vend-003",name:"Materials Inc.",proprietorName:"Dr. M",vendorNumber:"V003",address:"789 Material Rd",phoneNumber:"555-555-6666",balance:3250.5,openingBalance:3250.5,openingBalanceDate:"2023-01-01"},{id:"vend-004",name:"Vendor Gamma Co.",proprietorName:"Prof. G",vendorNumber:"V004",address:"012 Gamma Blvd",phoneNumber:"555-777-8888",balance:-500,openingBalance:-500,openingBalanceDate:"2023-01-01"}],E=h=>({...h,balanceFormatted:parseFloat(h.balance||0).toLocaleString("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2})}),J=({children:h,columnKey:j,sortConfig:m,requestSort:i,isTextRight:N=!1,className:c=""})=>{const w=m&&m.key===j,y=w?m.direction:null;return e.jsx("th",{scope:"col",className:`px-4 py-3 cursor-pointer hover:bg-primary/10 dark:hover:bg-dark-primary/10 transition-colors ${N?"text-right":"text-left"} ${c}`,onClick:()=>i(j),children:e.jsxs("div",{className:`flex items-center ${N?"justify-end":"justify-start"}`,children:[!N&&h,e.jsx("span",{className:`mx-1 ${N?"mr-0 ml-1":"ml-0 mr-1"}`,children:w?y==="ascending"?"▲":"▼":e.jsx(Pe,{size:14,className:"opacity-40"})}),N&&h]})})},ar=()=>{const{toast:h}=se();me();const[j,m]=o.useState(()=>ae.map(E)),[i,N]=o.useState(""),[c,w]=o.useState({key:"name",direction:"ascending"}),[y,F]=o.useState(!1),[k,B]=o.useState(null),[V,S]=o.useState(!1),[n,A]=o.useState(null),[C,T]=o.useState(null);o.useEffect(()=>{const a=localStorage.getItem("vendors");a?m(JSON.parse(a).map(E)):localStorage.setItem("vendors",JSON.stringify(ae))},[]);const L=a=>{localStorage.setItem("vendors",JSON.stringify(a.map(({balanceFormatted:r,...l})=>l)))},d=(a=null)=>{B(a),F(!0)},u=()=>{F(!1),B(null)},p=(a,r)=>{m(l=>{let t;if(r)t=l.map(b=>b.id===a.id?E({...b,...a,balance:a.openingBalance}):b);else{const b=E({...a,balance:a.openingBalance});t=[...l,b]}return L(t),t})},O=a=>{const r=j.find(l=>l.id===a);r&&(A(r),S(!0))},x=()=>{if(n){const a=j.filter(r=>r.id!==n.id);m(a),L(a),h({title:"Vendor Deleted",description:`${n.name} has been deleted.`,variant:"destructive"}),S(!1),A(null)}},s=a=>{T(a)},g=()=>{T(null)},U=()=>{h({title:"Import Vendors from Excel",description:"This feature will be available soon.",duration:3e3})},q=a=>N(a.target.value),P=a=>{let r="ascending";c&&c.key===a&&c.direction==="ascending"&&(r="descending"),w({key:a,direction:r})},M=o.useMemo(()=>{let a=[...j];if(i){const r=i.toLowerCase();a=a.filter(l=>Object.values(l).some(t=>String(t).toLowerCase().includes(r)))}return c!==null&&a.sort((r,l)=>{let t=r[c.key],b=l[c.key];return c.key==="balance"?(t=parseFloat(t)||0,b=parseFloat(b)||0):typeof t=="string"&&(t=t.toLowerCase(),b=b.toLowerCase()),t<b?c.direction==="ascending"?-1:1:t>b?c.direction==="ascending"?1:-1:0}),a},[i,c,j]);return e.jsx("div",{className:"space-y-6 p-1",children:e.jsxs(te,{className:"shadow-lg border-border dark:border-dark-border",children:[e.jsx(ne,{className:"bg-card dark:bg-dark-card rounded-t-lg p-4 md:p-6 border-b border-border dark:border-dark-border",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-3",children:[e.jsxs(de,{className:"text-2xl md:text-3xl font-bold text-primary dark:text-dark-primary flex items-center",children:[e.jsx($e,{size:28,className:"mr-3 text-accent dark:text-dark-accent"})," Vendors"]}),e.jsx("div",{className:"flex space-x-2",children:e.jsxs(he,{children:[e.jsx(pe,{asChild:!0,children:e.jsxs(f,{variant:"outline",className:"text-primary dark:text-dark-primary border-primary dark:border-dark-primary hover:bg-primary/10 dark:hover:bg-dark-primary/10 shadow-sm",children:[e.jsx(Ie,{size:20,className:"mr-2"})," Add Vendor"]})}),e.jsxs(xe,{align:"end",className:"bg-card dark:bg-dark-card shadow-lg rounded-md border border-border dark:border-dark-border",children:[e.jsx(_,{onClick:()=>d(null),className:"text-foreground dark:text-dark-foreground hover:bg-primary/10 dark:hover:bg-dark-primary/10 cursor-pointer",children:"Add New"}),e.jsx(_,{onClick:U,className:"text-foreground dark:text-dark-foreground hover:bg-primary/10 dark:hover:bg-dark-primary/10 cursor-pointer",children:"Import from Excel"})]})]})})]})}),e.jsxs(oe,{className:"p-4 md:p-6",children:[e.jsx(R,{open:y,onOpenChange:F,children:e.jsxs(G,{className:"sm:max-w-[550px] bg-card dark:bg-dark-card text-foreground dark:text-dark-foreground border-border dark:border-dark-border shadow-2xl rounded-lg",children:[e.jsxs(K,{children:[e.jsx(Y,{className:"text-primary dark:text-dark-primary text-2xl font-semibold",children:k?"Edit Vendor":"Add New Vendor"}),e.jsx(X,{className:"text-muted-foreground dark:text-dark-muted-foreground",children:k?"Update vendor details.":"Fill in the details to add a new vendor."})]}),e.jsx(Me,{onSave:p,onCancel:u,initialData:k,isEditMode:!!k})]})}),e.jsx(ge,{open:V,onOpenChange:S,children:e.jsxs(be,{children:[e.jsxs(fe,{children:[e.jsx(je,{children:"Are you absolutely sure?"}),e.jsxs(Ne,{children:['This action cannot be undone. This will permanently delete the vendor "',n==null?void 0:n.name,'".']})]}),e.jsxs(ke,{children:[e.jsx(ve,{onClick:()=>S(!1),children:"Cancel"}),e.jsx(ye,{onClick:x,className:"bg-destructive hover:bg-destructive/90",children:"Yes, delete vendor"})]})]})}),C?e.jsx(R,{open:!!C,onOpenChange:g,children:e.jsxs(G,{className:"sm:max-w-[90%] h-[90vh] flex flex-col p-0",children:[e.jsxs(K,{className:"p-4 border-b",children:[e.jsx(Y,{className:"text-2xl font-bold",children:"Vendor Ledger"}),e.jsxs(X,{children:["Detailed transaction history for ",C.name]})]}),e.jsx("div",{className:"flex-grow overflow-y-auto p-4",children:e.jsx(Ee,{vendorId:C.id,vendorName:C.name,onClose:g})})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6 flex items-center space-x-2 p-3 bg-background dark:bg-dark-background rounded-lg shadow-sm border border-border dark:border-dark-border",children:[e.jsx(v,{type:"text",placeholder:"Search vendors (Name, Balance...)",className:"flex-grow focus:ring-accent dark:focus:ring-dark-accent border-input dark:border-dark-input focus:border-primary dark:focus:border-dark-primary",value:i,onChange:q}),e.jsxs(f,{className:"bg-primary text-primary-foreground hover:bg-primary-hover dark:bg-dark-primary dark:text-dark-primary-foreground dark:hover:bg-dark-primary-hover",onClick:()=>h({title:"Search Updated",description:`Displaying results for "${i}"`}),children:[e.jsx(le,{size:18,className:"mr-2"})," Search"]})]}),e.jsx("div",{className:"overflow-x-auto rounded-lg border border-border dark:border-dark-border shadow-md",children:e.jsxs("table",{className:"w-full min-w-[600px] text-sm text-left text-foreground dark:text-dark-foreground",children:[e.jsx("thead",{className:"text-xs text-primary dark:text-dark-primary uppercase bg-muted/50 dark:bg-dark-muted/50",children:e.jsxs("tr",{children:[e.jsx(J,{columnKey:"name",sortConfig:c,requestSort:P,className:"min-w-[250px]",children:"Vendor Name"}),e.jsx(J,{columnKey:"address",sortConfig:c,requestSort:P,children:"Address"}),e.jsx(J,{columnKey:"phoneNumber",sortConfig:c,requestSort:P,children:"Phone Number"}),e.jsx(J,{columnKey:"balance",sortConfig:c,requestSort:P,isTextRight:!0,children:"Balance"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-center w-28",children:"Actions"})]})}),e.jsxs("tbody",{children:[M.map(a=>e.jsxs("tr",{className:"bg-card dark:bg-dark-card border-b border-border dark:border-dark-border last:border-b-0 hover:bg-muted/30 dark:hover:bg-dark-muted/30 transition-colors duration-150",children:[e.jsx("td",{className:"px-4 py-3 font-medium text-secondary dark:text-dark-secondary hover:underline cursor-pointer",onClick:()=>s(a),children:a.name}),e.jsx("td",{className:"px-4 py-3",children:a.address}),e.jsx("td",{className:"px-4 py-3",children:a.phoneNumber}),e.jsx("td",{className:"px-4 py-3 text-right font-semibold cursor-pointer hover:underline",onClick:()=>s(a),children:a.balanceFormatted}),e.jsxs("td",{className:"px-4 py-3 text-center space-x-1",children:[e.jsx(f,{variant:"ghost",size:"icon",className:"text-secondary dark:text-dark-secondary hover:text-accent dark:hover:text-dark-accent h-8 w-8",onClick:()=>d(a),children:e.jsx(Le,{size:16})}),e.jsx(f,{variant:"ghost",size:"icon",className:"text-destructive dark:text-red-400 hover:text-destructive/80 dark:hover:text-red-300 h-8 w-8",onClick:()=>O(a.id),children:e.jsx(ze,{size:16})})]})]},a.id)),M.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"text-center py-10 text-muted-foreground dark:text-dark-muted-foreground",children:i?`No vendors found for "${i}".`:"No vendors found. Add your first vendor!"})})]})]})})]})]})]})})};export{ar as default};
